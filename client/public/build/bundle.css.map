{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../src/ui/Ratings.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount } from \"svelte\";\n  import { beforeUpdate, afterUpdate } from \"svelte\";\n  import Modal from \"../ui/Modal.svelte\";\n\n  import { Table } from \"sveltestrap\";\n  import Icon from \"./Icon.svelte\";\n  import teachingPoints from \"../teaching.js\";\n\n  export let ratings;\n  let studyPointModalOpen = false;\n  let selectedStudyPoint;\n\n  let reviewersModalOpen = false;\n  let reviewersPeople = [];\n  let reviewerReaction;\n\n  var sumRatings = {};\n\n  onMount(async () => {\n    console.log(\"M: Ratings\");\n  });\n\n  beforeUpdate(() => {\n    console.log(\"BU: Ratings\");\n    sumRatings = {\n      th_01: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_02: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_03: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_04: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_05: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_06: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_07: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_08: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_09: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_10: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_11: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_12: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_13: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_14: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_15: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_16: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_17: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_18: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_19: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      },\n      th_20: {\n        ups: { ratings: 0, people: [] },\n        downs: { ratings: 0, people: [] }\n      }\n    };\n\n    ratings.forEach(rating => {\n      for (let i = 1; i < 21; i++) {\n        let suff = String(\"00\" + i).substr(-2);\n        if (rating[\"th_\" + suff] === true) {\n          sumRatings[\"th_\" + suff].ups.ratings++;\n          console.log(rating.listener_name);\n          sumRatings[\"th_\" + suff].ups.people.push(rating.listener_name);\n        }\n        if (rating[\"th_\" + suff] === false) {\n          sumRatings[\"th_\" + suff].downs.ratings++;\n          console.log(rating.listener_name);\n          sumRatings[\"th_\" + suff].downs.people.push(rating.listener_name);\n        }\n      }\n    });\n  });\n\n  afterUpdate(() => {\n    console.log(\"AU: Ratings\");\n  });\n\n  function showStudyPoint(point) {\n    selectedStudyPoint = point;\n    studyPointModalOpen = true;\n  }\n\n  function showReviewers(point, reaction, reviewers) {\n    selectedStudyPoint = point;\n    reviewerReaction = reaction;\n    reviewersPeople = reviewers;\n    reviewersModalOpen = true;\n  }\n</script>\n\n{#each ratings as rating}\n  {#if rating.comments && rating.comments.trim().length > 0}\n    <p class=\"comment mb-4\">\n      “{rating.comments}”\n      <span class=\"text-muted\">— {rating.listener_name}</span>\n    </p>\n  {/if}\n{/each}\n\n<Table class=\"table table-sm\">\n  <tbody>\n    {#each teachingPoints as point (point.study)}\n      <tr>\n        <td class=\"pointy\" on:click={() => showStudyPoint(point)}>\n          {point.name}\n        </td>\n        <td\n          class=\"text-center pointy\"\n          on:click={() => showReviewers(point, 'work-on', sumRatings[point.study].downs.people)}>\n          <Icon\n            icon=\"fa-hammer\"\n            color=\"badge-warning\"\n            numRatings={sumRatings[point.study].downs.ratings} />\n        </td>\n        <td\n          class=\"text-center pointy\"\n          on:click={() => showReviewers(point, 'good', sumRatings[point.study].ups.people)}>\n          <Icon\n            icon=\"fa-thumbs-up\"\n            color=\"badge-success\"\n            numRatings={sumRatings[point.study].ups.ratings} />\n\n        </td>\n      </tr>\n    {/each}\n  </tbody>\n</Table>\n\n<Modal\n  isOpen={studyPointModalOpen}\n  on:dismiss={() => (studyPointModalOpen = false)}>\n  <div slot=\"header\">{selectedStudyPoint.name}</div>\n  <span slot=\"body\">\n    {selectedStudyPoint.description}\n    <hr />\n    <a href={selectedStudyPoint.source}>\n      <span class=\"fas fa-lg fa-link\" />\n      {selectedStudyPoint.source}\n    </a>\n  </span>\n</Modal>\n\n<Modal\n  isOpen={reviewersModalOpen}\n  on:dismiss={() => (reviewersModalOpen = false)}>\n  <div slot=\"header\">{selectedStudyPoint.name}</div>\n  <span slot=\"body\">\n\n    {#each reviewersPeople as person}\n      <p>\n        <span class=\"mr-2\">\n          {#if reviewerReaction === 'work-on'}\n            <Icon icon=\"fa-hammer\" color=\"badge-warning\" numRatings={1} />\n          {:else}\n            <Icon icon=\"fa-thumbs-up\" color=\"badge-success\" numRatings={1} />\n          {/if}\n        </span>\n        {person}\n      </p>\n    {/each}\n\n  </span>\n</Modal>\n\n<style>\n  table {\n    margin: 0;\n  }\n  .table td,\n  .table th {\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\n  }\n  table tbody tr td {\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "AAgOE,KAAK,CAAC,oBAAK,CAAC,EAAE,CAAC,EAAE,eAAC,CAAC,AACjB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AAC9C,CAAC"
}